<modalerror openerrormodal="vm.ShowPopupError" detailError="vm.Error"></modalerror>
<section class="general-container">
    <div class="row general-container">
        <div class="panel panel-danger panel-principal">
            <div class="panel-heading row">
                <div class=" col-md-4 panel-title">
                    <strong class="panel-title text-left title-bar">
                        {{'0071' | translate |uppercase}}
                    </strong>
                </div>
                <div class=" col-md-8 text-right" style="padding-top: 5px">
                    <label ng-bind="vm.usuario"></label>
                    <span class="question-style glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="bottom" title="Ctrl + B" onclick="javascript:window.open('/enterprise_nt_help/index.htm?page=enterprise_nt/configuration/unit/unit.htm','','width=1100,height=600,left=50,top=50,toolbar=yes');"></span>
                </div>
            </div>
            <div class="panel-body general-container panel-padding panel-scroll">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 panel-padding" style="height: 100%">
                    <div class="panel-list">
                        <div class="panel panel-danger general-container">
                            <div class="panel-body general-container">
                                <div>
                                    <div class="col-md-6" style="padding-left: 0px;">
                                        <div class="input-group">
                                            <input date-range-picker id="daterange2" name="daterange2" class="form-control " type="text"  ng-model="vm.date" min="vm.inicial" max="vm.final" options="vm.opts">
                                            <div class="input-group-addon">
                                                <i class="glyphicon glyphicon-calendar"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6" style="padding-left: 0px;">
                                        <div class="input-group right-bar">
                                            <input data-ng-model="vm.search" class="form-control" type="text" placeholder="{{'0015' | translate}}">
                                            <div class="input-group-addon">
                                                <i class="glyphicon glyphicon-search"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <span style="margin-top:10px" class="badge" data-ng-bind="vm.filtered.length"></span>
                                        </div>
                                    </div>
                                </div>
                                <table class="table table-list">
                                    <thead>
                                        <tr>
                                            <th class="col-md-2">
                                                <a ng-click="$event.stopPropagation();vm.sortType = 'date'; sortReverse = !sortReverse; $event.stopPropagation() ">
                                                    <i ng-if="!sortReverse" class="glyphicon glyphicon-sort-by-alphabet"></i>
                                                    <i ng-if="sortReverse" class="glyphicon glyphicon-sort-by-alphabet-alt"></i>
                                                    <span ng-show="vm.sortType == 'date' && !sortReverse"></span>
                                                    <span ng-show="vm.sortType == 'date' && sortReverse"></span>
                                                </a> {{'0072' | translate}}
                                            </th>
                                            <th class="col-md-4">
                                                <a ng-click="$event.stopPropagation(); vm.sortType = 'url'; sortReverse = !sortReverse; $event.stopPropagation() ">
                                                    <i ng-if="!sortReverse" class="glyphicon glyphicon-sort-by-alphabet"></i>
                                                    <i ng-if="sortReverse" class="glyphicon glyphicon-sort-by-alphabet-alt"></i>
                                                    <span ng-show="vm.sortType == 'url' && !sortReverse"></span>
                                                    <span ng-show="vm.sortType == 'url' && sortReverse"></span>
                                                </a> {{'0073' | translate}}
                                            </th>
                                            <th class="col-md-4">
                                                <a ng-click="$event.stopPropagation(); vm.sortType = 'message'; sortReverse = !sortReverse; $event.stopPropagation() ">
                                                    <i ng-if="!sortReverse" class="glyphicon glyphicon-sort-by-alphabet"></i>
                                                    <i ng-if="sortReverse" class="glyphicon glyphicon-sort-by-alphabet-alt"></i>
                                                    <span ng-show="vm.sortType == 'message' && !sortReverse"></span>
                                                    <span ng-show="vm.sortType == 'message' && sortReverse"></span>
                                                </a>{{'0020' | translate}}
                                            </th>
                                            <th class="col-md-2">
                                                <a ng-click="$event.stopPropagation(); vm.sortType = 'code'; sortReverse = !sortReverse; $event.stopPropagation() ">
                                                    <i ng-if="!sortReverse" class="glyphicon glyphicon-sort-by-alphabet"></i>
                                                    <i ng-if="sortReverse" class="glyphicon glyphicon-sort-by-alphabet-alt"></i>
                                                    <span ng-show="vm.sortType == 'code' && !sortReverse"></span>
                                                    <span ng-show="vm.sortType == 'code' && sortReverse"></span>
                                                </a> {{'0035' | translate}}
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody class="tbody-list" style="width: 97%">
                                        <tr class="row-list" data-ng-repeat="exception in vm.filtered =(vm.data | filter: vm.search )| orderBy:vm.sortType:sortReverse" data-ng-click="vm.detail(exception,$index)" ng-class="{danger: $index == vm.selected}" data-toggle="modal" data-target="#modalE">
                                            <td class="col-md-2" data-ng-bind="exception.date"></td>
                                            <td class="col-md-4" data-ng-bind="exception.url"></td>
                                            <td class="col-md-4" data-ng-bind="exception.message"></td>
                                            <td class="col-md-2" data-ng-bind="exception.code"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
</section>
<div class="modal fade" id="modalE" tabindex="1" role="dialog" aria-labelledby="myModallabel" aria-hidden="true">
    <div class="modal-dialog  modal-lg">
        <div class="modal-content">
            <div class="modal-header modal-header-danger" ng-hide="vm.print">                
                <h4 class="modal-tittle text-center" id="myModallabel">{{'0100' | translate}}</h4>
            </div>
            <div class="modal-body">
             <div class="row" ng-show="vm.print">
             <div id="viewerContent" style="height: 500px" ></div>
                <div id="designerContent">
                      <cc1:StiWebViewer ID="StiWebViewer1" runat="server"
                         ShowSendEmailButton="true"
                         OnEmailReport="StiWebViewer1_EmailReport">
                      </cc1:StiWebViewer>
                </div>
             </div>
                <form name="error" id="error" ng-hide="vm.print">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="col-md-5"><strong> {{'0035' | translate}}:</strong></div>
                            <div class="col-md-7"><h5 data-ng-bind="vm.error.code"></h5></div>
                        </div>
                        <div class="col-md-12">
                            <div class="col-md-5"><strong>{{'0101' | translate}}:</strong></div>
                            <div class="col-md-7"><h5 data-ng-bind="vm.error.message"></h5></div>
                        </div>
                        <div class="col-md-12">
                            <div class="col-md-5"><strong>{{'0102' | translate}}:</strong></div>
                            <div class="col-md-7"><h5 data-ng-bind="vm.error.date"></h5></div>
                        </div>
                        <div class="col-md-12">
                            <div class="col-md-5"><strong>{{'0103' | translate}}:</strong></div>
                            <div class="col-md-7"><h5 data-ng-bind="vm.error.id"></h5></div>
                        </div>
                        <div class="col-md-12">
                            <div class="col-md-5"><strong>{{'0104' | translate}}:</strong></div>
                            <div class="col-md-7"><h5 data-ng-bind="vm.error.url"></h5></div>
                        </div>
                        <div class="col-md-12">
                            <div class="col-md-5"><strong>{{'0105' | translate}}:</strong></div>
                            <div class="col-md-7"><h5 data-ng-bind="vm.error.host"></h5></div>
                        </div>
                        <div class="col-md-12">
                            <div class="col-md-5"><strong>Usuario:</strong></div>
                            <div class="col-md-7"><h5 data-ng-bind="vm.error.user"></h5></div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer" ng-hide="vm.print">
                <div>
                    <div class="col-md-12 text-right" style="height: 100%">
                       <button type="button" class="btn btn-violet" ng-click="vm.File()">
                            <span class="fa fa-file-pdf-o" aria-hidden="true" ></span> {{'0009' | translate}}
                        </button>                         
                        <button class="btn btn-danger " type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                            <span class="glyphicon glyphicon-download" aria-hidden="true"></span> {{'0074' | translate}}
                        </button>
                         <button type="button" class="btn btn-info " data-dismiss="modal">
                            <span class="glyphicon glyphicon-remove" aria-hidden="true" ></span> {{'0022' | translate}}
                        </button>
                        <div class="modal-error">
                            <div class="collapse" id="collapseExample">
                                <div class="well modal-error-collapse">
                                    <p class="text-left" data-ng-bind="vm.error.detail"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




